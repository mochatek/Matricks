const _e=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}};_e();function _(){}function me(t,e){for(const n in e)t[n]=e[n];return t}function ue(t){return t()}function te(){return Object.create(null)}function N(t){t.forEach(ue)}function pe(t){return typeof t=="function"}function k(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Z;function be(t,e){return Z||(Z=document.createElement("a")),Z.href=e,t===Z.href}function ve(t){return Object.keys(t).length===0}function fe(t,...e){if(t==null)return _;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function ye(t){let e;return fe(t,n=>e=n)(),e}function X(t,e,n){t.$$.on_destroy.push(fe(e,n))}function h(t,e){t.appendChild(e)}function y(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode.removeChild(t)}function Ce(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function $(t){return document.createTextNode(t)}function q(){return $(" ")}function ae(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function g(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function we(t){return Array.from(t.childNodes)}function K(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Y(t,e,n,r){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function ne(t,e,n){t.classList[n?"add":"remove"](e)}function $e(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,r,e),s}let I;function P(t){I=t}function ee(){if(!I)throw new Error("Function called outside component initialization");return I}function Le(){const t=ee();return(e,n,{cancelable:r=!1}={})=>{const s=t.$$.callbacks[e];if(s){const l=$e(e,n,{cancelable:r});return s.slice().forEach(o=>{o.call(t,l)}),!l.defaultPrevented}return!0}}function U(t,e){return ee().$$.context.set(t,e),e}function G(t){return ee().$$.context.get(t)}const z=[],se=[],F=[],re=[],xe=Promise.resolve();let J=!1;function ke(){J||(J=!0,xe.then(de))}function Q(t){F.push(t)}const V=new Set;let D=0;function de(){const t=I;do{for(;D<z.length;){const e=z[D];D++,P(e),Me(e.$$)}for(P(null),z.length=0,D=0;se.length;)se.pop()();for(let e=0;e<F.length;e+=1){const n=F[e];V.has(n)||(V.add(n),n())}F.length=0}while(z.length);for(;re.length;)re.pop()();J=!1,V.clear(),P(t)}function Me(t){if(t.fragment!==null){t.update(),N(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Q)}}const H=new Set;let L;function Ee(){L={r:0,c:[],p:L}}function Se(){L.r||N(L.c),L=L.p}function v(t,e){t&&t.i&&(H.delete(t),t.i(e))}function x(t,e,n,r){if(t&&t.o){if(H.has(t))return;H.add(t),L.c.push(()=>{H.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function qe(t,e){const n={},r={},s={$$scope:1};let l=t.length;for(;l--;){const o=t[l],i=e[l];if(i){for(const c in o)c in i||(r[c]=1);for(const c in i)s[c]||(n[c]=i[c],s[c]=1);t[l]=i}else for(const c in o)s[c]=1}for(const o in r)o in n||(n[o]=void 0);return n}function Ae(t){return typeof t=="object"&&t!==null?t:{}}function B(t){t&&t.c()}function E(t,e,n,r){const{fragment:s,on_mount:l,on_destroy:o,after_update:i}=t.$$;s&&s.m(e,n),r||Q(()=>{const c=l.map(ue).filter(pe);o?o.push(...c):N(c),t.$$.on_mount=[]}),i.forEach(Q)}function S(t,e){const n=t.$$;n.fragment!==null&&(N(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Te(t,e){t.$$.dirty[0]===-1&&(z.push(t),ke(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function A(t,e,n,r,s,l,o,i=[-1]){const c=I;P(t);const u=t.$$={fragment:null,ctx:null,props:l,update:_,not_equal:s,bound:te(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:te(),dirty:i,skip_bound:!1,root:e.target||c.$$.root};o&&o(u.root);let d=!1;if(u.ctx=n?n(t,e.props||{},(f,a,...p)=>{const C=p.length?p[0]:a;return u.ctx&&s(u.ctx[f],u.ctx[f]=C)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](C),d&&Te(t,f)),a}):[],u.update(),d=!0,N(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const f=we(e.target);u.fragment&&u.fragment.l(f),f.forEach(b)}else u.fragment&&u.fragment.c();e.intro&&v(t.$$.fragment),E(t,e.target,e.anchor,e.customElement),de()}P(c)}class T{$destroy(){S(this,1),this.$destroy=_}$on(e,n){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(e){this.$$set&&!ve(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const M=[];function he(t,e=_){let n;const r=new Set;function s(i){if(k(t,i)&&(t=i,n)){const c=!M.length;for(const u of r)u[1](),M.push(u,t);if(c){for(let u=0;u<M.length;u+=2)M[u][0](M[u+1]);M.length=0}}}function l(i){s(i(t))}function o(i,c=_){const u=[i,c];return r.add(u),r.size===1&&(n=e(s)||_),i(t),()=>{r.delete(u),r.size===0&&(n(),n=null)}}return{set:s,update:l,subscribe:o}}const ge=8,W="matricksBest";function Oe(){function t(s){const l=ge-s,o=1+Math.floor(Math.random()*l),i=1+Math.floor(Math.random()*l),c=[];let u=0;for(let d=1;d<=l;d++)for(let f=1;f<=l;f++){const a=o==d&&i==f;c.push({index:u,open:!1,isTarget:a,enabled:!0}),u++}return c}const{subscribe:e,set:n,update:r}=he([]);return{subscribe:e,init:s=>n(t(s)),openCell:s=>r(l=>l.map((o,i)=>i==s?{...o,open:!0}:o)),disableCells:()=>r(s=>s.map(l=>({...l,enabled:!1})))}}function ze(){const t=localStorage.getItem(W);t===null&&localStorage.setItem(W,"0");const e=he(+t),n=r=>{ye(e)<r&&(e.set(r),localStorage.setItem(W,`${r}`))};return{subscribe:e.subscribe,compareAndUpdate:n}}const j=Oe(),le=ze();function Be(t){let e,n,r,s,l,o;return{c(){e=m("header"),n=m("div"),n.innerHTML=`<svg width="30px" height="30px" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="svelte-yfxs8h"><g stroke="#fff" stroke-width="1" fill="none" fill-rule="evenodd"><g fill="#000" fill-rule="nonzero"><path d="M10.75,15 C11.9926407,15 13,16.0073593 13,17.25 L13,22.75 C13,23.9926407 11.9926407,25 10.75,25 L5.25,25 C4.00735931,25 3,23.9926407 3,22.75 L3,17.25 C3,16.0073593 4.00735931,15 5.25,15 L10.75,15 Z M22.75,15 C23.9926407,15 25,16.0073593 25,17.25 L25,22.75 C25,23.9926407 23.9926407,25 22.75,25 L17.25,25 C16.0073593,25 15,23.9926407 15,22.75 L15,17.25 C15,16.0073593 16.0073593,15 17.25,15 L22.75,15 Z M10.75,3 C11.9926407,3 13,4.00735931 13,5.25 L13,10.75 C13,11.9926407 11.9926407,13 10.75,13 L5.25,13 C4.00735931,13 3,11.9926407 3,10.75 L3,5.25 C3,4.00735931 4.00735931,3 5.25,3 L10.75,3 Z M22.75,3 C23.9926407,3 25,4.00735931 25,5.25 L25,10.75 C25,11.9926407 23.9926407,13 22.75,13 L17.25,13 C16.0073593,13 15,11.9926407 15,10.75 L15,5.25 C15,4.00735931 16.0073593,3 17.25,3 L22.75,3 Z"></path></g></g></svg> 
    <span class="svelte-yfxs8h">Matricks</span>`,r=q(),s=m("button"),s.textContent="\u25B6",g(n,"class","svelte-yfxs8h"),g(s,"class","svelte-yfxs8h"),g(e,"class","svelte-yfxs8h")},m(i,c){y(i,e,c),h(e,n),h(e,r),h(e,s),l||(o=ae(s,"click",t[0]),l=!0)},p:_,i:_,o:_,d(i){i&&b(e),l=!1,o()}}}function Pe(t){const e=Le();function n(){e("playAgain")}return[n]}class je extends T{constructor(e){super(),A(this,e,Pe,Be,k,{})}}function Ie(t){let e,n,r,s,l,o,i,c,u,d,f,a,p,C,R;return{c(){e=m("section"),n=m("div"),r=$("LEVEL"),s=m("span"),l=$(t[0]),o=q(),i=m("div"),c=$("SCORE"),u=m("span"),d=$(t[1]),f=q(),a=m("div"),p=$("BEST"),C=m("span"),R=$(t[2]),g(s,"class","svelte-12fqh20"),g(n,"class","svelte-12fqh20"),g(u,"class","svelte-12fqh20"),g(i,"class","svelte-12fqh20"),g(C,"class","svelte-12fqh20"),g(a,"class","svelte-12fqh20"),g(e,"class","svelte-12fqh20")},m(w,O){y(w,e,O),h(e,n),h(n,r),h(n,s),h(s,l),h(e,o),h(e,i),h(i,c),h(i,u),h(u,d),h(e,f),h(e,a),h(a,p),h(a,C),h(C,R)},p(w,[O]){O&1&&K(l,w[0]),O&2&&K(d,w[1]),O&4&&K(R,w[2])},i:_,o:_,d(w){w&&b(e)}}}function Ne(t,e,n){let{level:r}=e,{score:s}=e,{best:l}=e;return t.$$set=o=>{"level"in o&&n(0,r=o.level),"score"in o&&n(1,s=o.score),"best"in o&&n(2,l=o.best)},[r,s,l]}class Ze extends T{constructor(e){super(),A(this,e,Ne,Ie,k,{level:0,score:1,best:2})}}const De="https://mochatek.github.io/Matricks/assets/treasure.04be33fd.gif";function oe(t){let e,n;return{c(){e=m("img"),g(e,"alt","Treasure"),be(e.src,n=`${De}?time=${Date.now()}`)||g(e,"src",n),g(e,"class","svelte-u0c4bq")},m(r,s){y(r,e,s)},p:_,d(r){r&&b(e)}}}function Fe(t){let e,n,r,s=t[1]&&t[0]&&oe();return{c(){e=m("div"),s&&s.c(),Y(e,"--hue",t[2]),g(e,"class","svelte-u0c4bq"),ne(e,"open",t[0])},m(l,o){y(l,e,o),s&&s.m(e,null),n||(r=ae(e,"click",t[3]),n=!0)},p(l,[o]){l[1]&&l[0]?s?s.p(l,o):(s=oe(),s.c(),s.m(e,null)):s&&(s.d(1),s=null),o&1&&ne(e,"open",l[0])},i:_,o:_,d(l){l&&b(e),s&&s.d(),n=!1,r()}}}function He(t,e,n){let{index:r,open:s,isTarget:l,enabled:o}=e;const i=Math.floor(Math.random()*360),c=G("endLevel"),u=G("openSound"),d=G("winSound");function f(){o&&(j.openCell(r),l?(c(),d.play()):u.play())}return t.$$set=a=>{"index"in a&&n(4,r=a.index),"open"in a&&n(0,s=a.open),"isTarget"in a&&n(1,l=a.isTarget),"enabled"in a&&n(5,o=a.enabled)},[s,l,i,f,r,o]}class Re extends T{constructor(e){super(),A(this,e,He,Fe,k,{index:4,open:0,isTarget:1,enabled:5})}}function ie(t,e,n){const r=t.slice();return r[1]=e[n],r}function ce(t){let e,n;const r=[t[1]];let s={};for(let l=0;l<r.length;l+=1)s=me(s,r[l]);return e=new Re({props:s}),{c(){B(e.$$.fragment)},m(l,o){E(e,l,o),n=!0},p(l,o){const i=o&1?qe(r,[Ae(l[1])]):{};e.$set(i)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){x(e.$$.fragment,l),n=!1},d(l){S(e,l)}}}function Ke(t){let e,n,r=t[0],s=[];for(let o=0;o<r.length;o+=1)s[o]=ce(ie(t,r,o));const l=o=>x(s[o],1,1,()=>{s[o]=null});return{c(){e=m("section");for(let o=0;o<s.length;o+=1)s[o].c();Y(e,"--size",Math.sqrt(t[0].length)),g(e,"class","svelte-guoi36")},m(o,i){y(o,e,i);for(let c=0;c<s.length;c+=1)s[c].m(e,null);n=!0},p(o,[i]){if(i&1){r=o[0];let c;for(c=0;c<r.length;c+=1){const u=ie(o,r,c);s[c]?(s[c].p(u,i),v(s[c],1)):(s[c]=ce(u),s[c].c(),v(s[c],1),s[c].m(e,null))}for(Ee(),c=r.length;c<s.length;c+=1)l(c);Se()}(!n||i&1)&&Y(e,"--size",Math.sqrt(o[0].length))},i(o){if(!n){for(let i=0;i<r.length;i+=1)v(s[i]);n=!0}},o(o){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)x(s[i]);n=!1},d(o){o&&b(e),Ce(s,o)}}}function Ue(t,e,n){let r;return X(t,j,s=>n(0,r=s)),[r]}class Ge extends T{constructor(e){super(),A(this,e,Ue,Ke,k,{})}}function Ve(t){let e;return{c(){e=m("footer"),e.innerHTML=`<a href="https://github.com/mochatek"><svg width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>github</title><g id="brand" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="github" fill="#000000"><path d="M12,2 C6.475,2 2,6.475 2,12 C2,16.425 4.8625,20.1625 8.8375,21.4875 C9.3375,21.575 9.525,21.275 9.525,21.0125 C9.525,20.775 9.5125,19.9875 9.5125,19.15 C7,19.6125 6.35,18.5375 6.15,17.975 C6.0375,17.6875 5.55,16.8 5.125,16.5625 C4.775,16.375 4.275,15.9125 5.1125,15.9 C5.9,15.8875 6.4625,16.625 6.65,16.925 C7.55,18.4375 8.9875,18.0125 9.5625,17.75 C9.65,17.1 9.9125,16.6625 10.2,16.4125 C7.975,16.1625 5.65,15.3 5.65,11.475 C5.65,10.3875 6.0375,9.4875 6.675,8.7875 C6.575,8.5375 6.225,7.5125 6.775,6.1375 C6.775,6.1375 7.6125,5.875 9.525,7.1625 C10.325,6.9375 11.175,6.825 12.025,6.825 C12.875,6.825 13.725,6.9375 14.525,7.1625 C16.4375,5.8625 17.275,6.1375 17.275,6.1375 C17.825,7.5125 17.475,8.5375 17.375,8.7875 C18.0125,9.4875 18.4,10.375 18.4,11.475 C18.4,15.3125 16.0625,16.1625 13.8375,16.4125 C14.2,16.725 14.5125,17.325 14.5125,18.2625 C14.5125,19.6 14.5,20.675 14.5,21.0125 C14.5,21.275 14.6875,21.5875 15.1875,21.4875 C19.1375,20.1625 22,16.4125 22,12 C22,6.475 17.525,2 12,2 L12,2 Z" id="Shape"></path></g></g></svg></a> 
  <small class="svelte-fqvdgr">v1.0 \xA9 MochaTek | 2022</small>`,g(e,"class","svelte-fqvdgr")},m(n,r){y(n,e,r)},p:_,i:_,o:_,d(n){n&&b(e)}}}class We extends T{constructor(e){super(),A(this,e,null,Ve,k,{})}}const Xe="https://mochatek.github.io/Matricks/assets/open_cell.b4aaa99e.wav",Ye="https://mochatek.github.io/Matricks/assets/find_treasure.ef9e8681.wav";function Je(t){let e,n,r,s,l,o,i,c,u,d;return e=new je({}),e.$on("playAgain",t[3]),s=new Ze({props:{level:t[0],score:t[1],best:t[2]}}),i=new Ge({}),u=new We({}),{c(){B(e.$$.fragment),n=q(),r=m("main"),B(s.$$.fragment),l=q(),o=m("div"),B(i.$$.fragment),c=q(),B(u.$$.fragment),g(o,"class","svelte-yise0x"),g(r,"class","svelte-yise0x")},m(f,a){E(e,f,a),y(f,n,a),y(f,r,a),E(s,r,null),h(r,l),h(r,o),E(i,o,null),y(f,c,a),E(u,f,a),d=!0},p(f,[a]){const p={};a&1&&(p.level=f[0]),a&2&&(p.score=f[1]),a&4&&(p.best=f[2]),s.$set(p)},i(f){d||(v(e.$$.fragment,f),v(s.$$.fragment,f),v(i.$$.fragment,f),v(u.$$.fragment,f),d=!0)},o(f){x(e.$$.fragment,f),x(s.$$.fragment,f),x(i.$$.fragment,f),x(u.$$.fragment,f),d=!1},d(f){S(e,f),f&&b(n),f&&b(r),S(s),S(i),f&&b(c),S(u,f)}}}function Qe(t,e,n){let r,s;X(t,j,d=>n(4,r=d)),X(t,le,d=>n(2,s=d));let l=1,o=0;function i(){l<ge-1?n(0,l++,l):le.compareAndUpdate(o)}function c(){j.disableCells(),n(1,o+=r.filter(d=>!d.open).length+1),setTimeout(()=>i(),2e3)}function u(){n(0,l=1),n(1,o=0)}return U("endLevel",c),U("openSound",new Audio(Xe)),U("winSound",new Audio(Ye)),t.$$.update=()=>{t.$$.dirty&1&&j.init(l)},[l,o,s,u]}class et extends T{constructor(e){super(),A(this,e,Qe,Je,k,{})}}new et({target:document.getElementById("app")});
